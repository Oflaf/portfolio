<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olaf M. | My Works</title>
    
    <!-- Linki do fontów - skopiowane z index.html -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/hk-grotesk" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/cascadia-code" rel="stylesheet">
    
    <!-- Link do nowego pliku CSS -->
    <link rel="stylesheet" href="work.css">

    <!-- Dodanie biblioteki GSAP do animacji przejść -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

    <style>
        /* Styl blokujący przewijanie */
        body.stop-scrolling {
            height: 100vh;
            overflow: hidden;
        }
    </style>
</head>

<body class="stop-scrolling">
    
    <!-- Custom Cursor -->
    <div id="custom-cursor"></div>

    <!-- ELEMENT PRZEJŚCIA (Overlay) -->
    <div id="transition-overlay"></div> 

    <div class="work-page-container">
        
        <!-- NAGŁÓWEK LEWY GÓRNY RÓG -->
        <div class="work-header-title">
            OLAF M. | MY WORKS
            <span class="header-subtitle">graphics designer & web designer</span>
        </div>

        <!-- ZMIANA: Przełącznik Języka i Motywu -->
        <div class="header-controls">
            <a href="index-pl.html" class="lang-link">
                <img src="img/use_/lang.png" alt="Language / Język" class="lang-icon" id="lang-icon">
                <span class="lang-text" id="lang-text">PL</span> 
            </a>

            <!-- Przełącznik Motywu -->
            <div class="theme-switch-icons">
                <img src="img/use_/light.png" alt="Light Mode" id="light-icon" class="mode-icon active-mode-icon">
                <img src="img/use_/dark.png" alt="Dark Mode" id="dark-icon" class="mode-icon">
            </div>

            <a href="index.html" class="header-back-link" id="back-link">
                <span>Back</span>
            </a>
        </div>
        <!-- KONIEC ZMIANY -->
        
        <section class="portfolio-section">
            
            <div class="portfolio-visuals">
                
                <div class="card-stack-wrapper"> 
                    <div class="card-stack">
                        <div class="portfolio-card" data-index="0">
                            <img src="" alt="Document 1 Preview">
                        </div>
                        <div class="portfolio-card" data-index="1">
                            <img src="" alt="Document 2 Preview">
                        </div>
                        <div class="portfolio-card" data-index="2">
                            <img src="" alt="Document 3 Preview">
                        </div>
                        <div class="portfolio-card" data-index="3">
                            <img src="" alt="Document 4 Preview">
                        </div>
                        <div class="portfolio-card" data-index="4">
                            <img src="" alt="Document 5 Preview">
                        </div>
                    </div>
                </div>

            </div>

            <!-- PRAWA STRONA (2/6: OPIS PRACY) -->
            <div class="portfolio-info">
                <div class="info-header">
                    <h2 id="info-title" class="info-title"></h2>
                    <span id="info-date" class="info-date"></span>
                </div>
                <p id="info-description-1" class="info-description-1"></p>
                <p id="info-description-2" class="info-description-2"></p>
                
                <div class="info-counter">
                    <span id="current-index">1</span>/<span id="total-works">5</span>
                </div>

                <div class="portfolio-controls-desktop">
                    <button id="prev-btn-desktop" class="nav-btn">Prev</button>
                    <button id="next-btn-desktop" class="nav-btn">Next</button>
                </div>
            </div>

        </section>
        
        <div class="portfolio-controls-mobile">
            <button id="prev-btn-mobile" class="nav-btn">Prev</button>
            <button id="next-btn-mobile" class="nav-btn">Next</button>
        </div>

    </div>

<!-- SKRYPTY JAVASCRIPT - KLUCZ DO ZAŁADOWANIA OBRAZÓW -->
<script>
    // --- Dane Pracy (8 elementów) ---
    const worksData = [
        { 
            title: "UI Concept and Front-End Build", 
            date: "2025-03-12", 
            description1: "This project focused on developing a detailed custom mock-up and initial front-end scripting for a film maker and film director’s professional website.", 
            description2: "All graphic elements, layouts, and visual components were handcrafted by me, creating a unique and original design style. The photos and visual materials provided for the project were carefully retouched and adapted to fit the artistic direction and technical needs of the interface.",
            image: "document1.png" 
        },
        { 
            title: "Personal Introduction Page", 
            date: "2025-02-15", 
            description1: "A digital mockup and conversational-tech demo built to showcase a modern athlete-focused experience featuring marathon runner Jason Smith.", 
            description2: "The full visual framework — layout, branding elements, and interface components — was designed entirely by me, with all images carefully prepared and optimized for seamless display. The prototype includes a custom-crafted HTML structure, interaction logic enabling fluid conversations with Jason’s virtual agent, and tailored styling to ensure clarity, responsiveness, and an intuitive user flow.",
            image: "document2.png" 
        },
        { 
            title: "Portfolio Prototype", 
            date: "2024-02-28", 
            description1: "A clean and minimalist web portfolio created to highlight the work and artistic style of a Czech photographer.", 
            description2: "The entire visual presentation — layout structure, typography, and interface elements — was crafted by me to emphasize clarity and understated elegance. All photographs were carefully prepared for web use to retain detail while ensuring fast loading. The build features a lightweight HTML foundation, subtle interface interactions, and custom styling designed to present her work in a refined, distraction-free viewing experience.",
            image: "document3.png" 
        },
        { 
            title: "Community Blog Prototype", 
            date: "2025-01-11", 
            description1: "A community-oriented website concept designed to support a restoration project and provide a clean, easy-to-manage blogging platform.", 
            description2: "The entire visual layer — layouts, graphics, and interface components was handcrafted by me, with all supplied photos carefully edited and optimized for web use. The build included HTML structure, JavaScript functionality for interactive elements, and custom styling to ensure a lightweight and responsive user experience.",
            image: "document4.png" 
        },

                { 
            title: "Personal Portfolio", 
            date: "2025-12-17", 
            description1: "A compact showcase of my design prototypes, interfaces, and technical experiments. I created the full visual structure of the site, keeping it clean, lightweight, and consistent across all featured projects.", 
            description2: "One highlight is my custom WebGL2 engine, where the sky, ocean and celestial elements are generated procedurally in GLSL. Rendering runs on a single fullscreen quad with most calculations handled on the GPU, while JavaScript manages only camera and time controls.",
            image: "document5.png" 
        },

        { 
            title: "Urban Fashion E-commerce", 
            date: "2024-11-20", 
            description1: "A bold and dynamic storefront concept designed for an emerging streetwear brand, focusing on high-impact imagery and fluid navigation.", 
            description2: "I designed the complete user interface, including custom product grids and a streamlined checkout flow. The front-end build incorporates smooth page transitions, interactive product previews, and a responsive layout ensuring a premium shopping experience across all devices.",
            image: "document6.png" 
        },
        { 
            title: "FinTech Dashboard Interface", 
            date: "2024-10-05", 
            description1: "A complex data visualization platform created for a mock cryptocurrency exchange, prioritizing data legibility and user control.", 
            description2: "The visual system—including dark-mode specific color palettes and custom chart components—was developed entirely from scratch. The prototype demonstrates a responsive grid layout and interaction states for real-time data updates, built with clean, semantic HTML and CSS.",
            image: "document7.png" 
        },
        { 
            title: "Music Festival Landing Page", 
            date: "2024-09-15", 
            description1: "An immersive promotional website for a fictional electronic music festival, designed to capture the event's atmosphere and drive ticket sales.", 
            description2: "All graphical assets, including the typographic composition and background treatments, were artistically directed by me. The technical implementation features scroll-triggered animations and a video-heavy layout optimized for performance without compromising visual fidelity.",
            image: "document8.png" 
        },
        {
            title: "Cozy virtual space - Catchin' Club", 
            date: "in production since 2025-01-05", 
            description1: "Catching Club is a solo-developed, relaxing concept project for an anonymous MMO. The game focuses on social interactions, fishing, and building acquaintances. All pixel-art visual assets were personally designed and created by me.", 
            description2:"It utilizes an advanced, custom P2P architecture built on WebRTC and the PeerJS library, with all server logic and synchronization managed by my original dedicated Game Host Worker, eliminating the need for traditional server infrastructure.",
            image: "document8.png" 
        },
    ];

    // --- Ustawienia Animacji i Kart ---
    const CARD_COUNT = worksData.length; // Teraz to jest 8
    const TRANSITION_DURATION = 0.8; 
    let isAnimating = false;
    
    // NOWA ZMIENNA: Definiuje ile kart ma unikalne pozycje (0-4). 
    // Wszystkie dalsze karty (5,6,7) będą brały pozycję ostatniej (4).
    const VISIBLE_LIMIT = 4; 

    const isMobile = window.innerWidth <= 1024; 

    const DESKTOP_PROPS = {
        0: { z: 10, rotationY: -6, scale: 1, x: '0%', opacity: 1, zIndex: 5 },
        1: { z: 5, rotationY: -5, scale: 0.98, x: '2%', opacity: 1, zIndex: 4 },
        2: { z: 4, rotationY: -4, scale: 0.96, x: '4%', opacity: 0.8, zIndex: 3 },
        3: { z: 3, rotationY: -3, scale: 0.94, x: '6%', opacity: 0.4, zIndex: 2 },
        4: { z: 2, rotationY: -2, scale: 0.92, x: '8%', opacity: 0, zIndex: 1 },
    };
    
    const MOBILE_PROPS = {
        0: { z: 10, rotationY: -3, scale: 1, x: '0%', opacity: 1, zIndex: 5 },
        1: { z: 5, rotationY: -2, scale: 0.98, x: '1%', opacity: 1, zIndex: 4 },
        2: { z: 4, rotationY: -1, scale: 0.96, x: '2%', opacity: 0.8, zIndex: 3 },
        3: { z: 3, rotationY: 0, scale: 0.94, x: '3%', opacity: 0.4, zIndex: 2 },
        4: { z: 2, rotationY: 0, scale: 0.92, x: '4%', opacity: 0, zIndex: 1 }, 
    };
    
    const CARD_PROPS = isMobile ? MOBILE_PROPS : DESKTOP_PROPS;


    // Funkcja do inicjalizacji i aktualizacji stanów kart
    function updateCardState(cards) {
        cards.forEach((card, index) => {
            // POPRAWKA: Jeśli index > 4, użyj propsów z indexu 4 (VISIBLE_LIMIT)
            const props = CARD_PROPS[index] || CARD_PROPS[VISIBLE_LIMIT]; 
            
            const workIndex = parseInt(card.dataset.workIndex);
            if(workIndex >= 0 && workIndex < worksData.length) {
                card.querySelector('img').src = `img/work_/${worksData[workIndex].image}`; 
            }

            // Ukrywamy karty, które są "daleko" w stosie (np. 6., 7., 8. karta) żeby nie migały
            const finalOpacity = index > VISIBLE_LIMIT ? 0 : props.opacity;

            gsap.to(card, {
                duration: TRANSITION_DURATION,
                x: props.x,
                y: 0, 
                rotationY: props.rotationY,
                scale: props.scale,
                opacity: finalOpacity, // Używamy poprawionego opacity
                zIndex: props.zIndex,
                ease: "power3.inOut"
            });
        });
    }

    // Animacja początkowego ładowania
    function initialCardLoadAnimation(cards) {
         
        cards.forEach((card, index) => {
            // POPRAWKA: Zabezpieczenie przed brakiem propsów dla indexu > 4
            const props = CARD_PROPS[index] || CARD_PROPS[VISIBLE_LIMIT];
            card.style.zIndex = props.zIndex;
            
            const workIndex = parseInt(card.dataset.workIndex);
            if(workIndex >= 0 && workIndex < worksData.length) {
                card.querySelector('img').src = `img/work_/${worksData[workIndex].image}`; 
            }
        });
        
        gsap.set(cards, {
            x: isMobile ? '-150%' : '-150%', 
            y: '0%', 
            rotationY: -45, 
            scale: 0.8,
            opacity: 0,
            visibility: 'visible'
        });

        const tl = gsap.timeline({
            onComplete: () => {
                isAnimating = false;
            }
        });
        
        for (let i = cards.length - 1; i >= 0; i--) {
            const card = cards[i];
            // POPRAWKA: Używamy VISIBLE_LIMIT zamiast błędu
            const props = CARD_PROPS[i] || CARD_PROPS[VISIBLE_LIMIT];
            const finalOpacity = i > VISIBLE_LIMIT ? 0 : props.opacity;
            
            tl.to(card, {
                duration: 1.5, 
                x: props.x,
                y: 0, 
                rotationY: props.rotationY,
                scale: props.scale,
                opacity: finalOpacity,
                ease: "power4.out" 
            }, (cards.length - 1 - i) * 0.1); 
        }
    }


    // Funkcja do aktualizacji sekcji tekstowej
    function updateText(data) {
        const titleEl = document.getElementById('info-title');
        const dateEl = document.getElementById('info-date');
        const desc1El = document.getElementById('info-description-1');
        const desc2El = document.getElementById('info-description-2');

        gsap.to([titleEl, dateEl, desc1El, desc2El], { 
            opacity: 0,
            filter: 'blur(8px)',
            duration: TRANSITION_DURATION / 2,
            onComplete: () => {
                titleEl.textContent = data.title;
                dateEl.textContent = data.date;
                desc1El.textContent = data.description1;
                desc2El.textContent = data.description2;

                gsap.to([titleEl, dateEl, desc1El, desc2El], { 
                    opacity: 1,
                    filter: 'blur(0px)',
                    duration: TRANSITION_DURATION / 2,
                    delay: 0.1, 
                    ease: "power3.out"
                });
            }
        });
    }

    // GŁÓWNA LOGIKA PRZEJŚCIA
    function handleTransition(direction) {
        if (isAnimating) return;
        isAnimating = true;

        const cards = Array.from(document.querySelectorAll('.portfolio-card'));
        const firstCard = cards[0];
        const cardStack = document.querySelector('.card-stack');

        const currentWorkIndex = parseInt(firstCard.dataset.workIndex);
        const lastWorkIndex = (currentWorkIndex - 1 + worksData.length) % worksData.length;
        const nextWorkIndex = (currentWorkIndex + 1) % worksData.length;

        if (direction === 'next') {
            gsap.to(firstCard, {
                x: isMobile ? '-100%' : '-110%', 
                rotationY: -10,
                scale: 1.1,
                opacity: 0,
                duration: TRANSITION_DURATION,
                ease: "power2.in",
                onComplete: () => {
                    firstCard.dataset.workIndex = nextWorkIndex;
                    cardStack.appendChild(firstCard);
                    
                    // POPRAWKA: Reset pozycji na pozycję ostatnią (VISIBLE_LIMIT)
                    const lastProps = CARD_PROPS[VISIBLE_LIMIT];
                    
                    gsap.set(firstCard, {
                        x: lastProps.x, 
                        rotationY: lastProps.rotationY,
                        scale: lastProps.scale,
                        opacity: 0, // Zaczyna jako niewidoczny
                        zIndex: lastProps.zIndex
                    });

                    const updatedCards = Array.from(document.querySelectorAll('.portfolio-card'));
                    updateCardState(updatedCards);
                    isAnimating = false;
                }
            });

            updateText(worksData[nextWorkIndex]);
            
            const currentIndexEl = document.getElementById('current-index');
            let currentNum = parseInt(currentIndexEl.textContent);
            currentNum = (currentNum % CARD_COUNT) + 1;
            currentIndexEl.textContent = currentNum;

        } else if (direction === 'prev') {
            const lastCard = cards[cards.length - 1]; 
            lastCard.dataset.workIndex = lastWorkIndex; 

            gsap.set(lastCard, {
                x: isMobile ? '-150%' : '-150%', 
                rotationY: -45,
                scale: 0.8,
                opacity: 0,
                zIndex: 10 
            });

            cards.forEach((card, index) => {
                 // POPRAWKA: Zabezpieczenie propsów przy przesuwaniu Z-index
                 const nextProps = CARD_PROPS[index+1] || CARD_PROPS[VISIBLE_LIMIT];
                 gsap.set(card, { zIndex: nextProps ? nextProps.zIndex : 0 });
            });

            cardStack.prepend(lastCard);

            const updatedCards = Array.from(document.querySelectorAll('.portfolio-card'));
            updateCardState(updatedCards); 
            
            updateText(worksData[lastWorkIndex]);

            const currentIndexEl = document.getElementById('current-index');
            let currentNum = parseInt(currentIndexEl.textContent);
            currentNum = (currentNum - 2 + CARD_COUNT) % CARD_COUNT + 1;
            currentIndexEl.textContent = currentNum;

            gsap.delayedCall(TRANSITION_DURATION, () => {
                isAnimating = false;
            });
        }
    }

    // --- Reszta funkcji (Theme, Cursor itp.) bez zmian ---
    function toggleTheme() {
        const body = document.body;
        const overlay = document.getElementById('transition-overlay');
        const lightIcon = document.getElementById('light-icon');
        const darkIcon = document.getElementById('dark-icon');

        gsap.set(overlay, { 
            visibility: 'visible', 
            pointerEvents: 'all', 
            opacity: body.classList.contains('light-mode-active') ? 0 : 1 
        });

        gsap.to(overlay, {
            opacity: body.classList.contains('light-mode-active') ? 1 : 0, 
            duration: 0.4, 
            ease: "power2.in", 
            onComplete: () => {
                body.classList.toggle('light-mode-active');
                overlay.style.backgroundColor = body.classList.contains('light-mode-active') ? '#fcfcfc' : '#000';
                lightIcon.classList.toggle('active-mode-icon');
                darkIcon.classList.toggle('active-mode-icon');
                
                gsap.to(overlay, {
                    opacity: 0,
                    duration: 0.4, 
                    ease: "power2.out",
                    onComplete: () => {
                        gsap.set(overlay, { visibility: 'hidden', pointerEvents: 'none' });
                    }
                });
            }
        });
    }


    document.addEventListener("DOMContentLoaded", function() {
        const cursor = document.getElementById('custom-cursor');
        const overlay = document.getElementById('transition-overlay');
        const body = document.body;
        const backLink = document.getElementById('back-link');
        
        isAnimating = true; 

        if (overlay) {
            gsap.to(overlay, { opacity: 0, duration: 1.2, ease: "power2.out", onComplete: () => {
                gsap.set(overlay, { visibility: 'hidden', pointerEvents: 'none' });
                body.classList.remove('stop-scrolling'); 
            }});
        }
        
        if (backLink && overlay) {
            backLink.addEventListener('click', function(e) {
                e.preventDefault(); 
                const targetUrl = this.getAttribute('href');
                gsap.set(overlay, { 
                    visibility: 'visible', 
                    pointerEvents: 'all', 
                    opacity: 0, 
                    backgroundColor: '#000' 
                });
                body.classList.add('stop-scrolling');
                gsap.to(overlay, { opacity: 1, duration: 0.8, ease: "power2.in", onComplete: () => {
                    window.location.href = targetUrl;
                }});
            });
        }
        
        let mouseX = 0, mouseY = 0, cursorX = 0, cursorY = 0;
        const speed = 0.15; 

        if (cursor) {
            document.addEventListener('mousemove', function(e) {
                mouseX = e.clientX; mouseY = e.clientY;
            });

            function animateCursor() {
                cursorX += (mouseX - cursorX) * speed;
                cursorY += (mouseY - cursorY) * speed;
                cursor.style.left = cursorX + 'px';
                cursor.style.top = cursorY + 'px';
                requestAnimationFrame(animateCursor);
            }
            animateCursor();

            document.addEventListener('mousedown', () => cursor.classList.add('click-active'));
            document.addEventListener('mouseup', () => cursor.classList.remove('click-active'));

            const links = document.querySelectorAll('a, button, .header-back-link, input, .nav-btn, .lang-link, .mode-icon');
            links.forEach(link => {
                link.addEventListener('mouseenter', () => cursor.classList.add('hover-active'));
                link.addEventListener('mouseleave', () => cursor.classList.remove('hover-active'));
            });
        }
        
        const cardStack = document.querySelector('.card-stack');
        const nextBtnDesktop = document.getElementById('next-btn-desktop');
        const prevBtnDesktop = document.getElementById('prev-btn-desktop');
        const nextBtnMobile = document.getElementById('next-btn-mobile');
        const prevBtnMobile = document.getElementById('prev-btn-mobile');
        const totalWorksEl = document.getElementById('total-works');
        
        const lightIcon = document.getElementById('light-icon');
        const darkIcon = document.getElementById('dark-icon');
        
        if (lightIcon && darkIcon) {
            lightIcon.addEventListener('click', toggleTheme);
            darkIcon.addEventListener('click', toggleTheme);
        }

        if (cardStack) {
            // Generowanie dodatkowych divów dla nowych kart
            while (cardStack.children.length < CARD_COUNT) {
                const newCard = document.createElement('div');
                newCard.classList.add('portfolio-card');
                const img = document.createElement('img');
                img.alt = "Document Preview";
                newCard.appendChild(img);
                cardStack.appendChild(newCard);
            }

            const cards = Array.from(document.querySelectorAll('.portfolio-card'));
            cards.forEach((card, index) => {
                card.dataset.workIndex = index; 
            });

            // Uruchomienie z poprawioną logiką
            updateCardState(cards); 
            initialCardLoadAnimation(cards); 
            
            updateText(worksData[0]); 
            totalWorksEl.textContent = CARD_COUNT; // To zmieni "1/5" na "1/8"

            if(nextBtnDesktop) nextBtnDesktop.addEventListener('click', () => handleTransition('next'));
            if(prevBtnDesktop) prevBtnDesktop.addEventListener('click', () => handleTransition('prev'));
            if(nextBtnMobile) nextBtnMobile.addEventListener('click', () => handleTransition('next'));
            if(prevBtnMobile) prevBtnMobile.addEventListener('click', () => handleTransition('prev'));

            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    // Efekt hover działa tylko na pierwszej karcie
                    if (this === document.querySelector('.card-stack').children[0] && !isAnimating) {
                        gsap.to(this, { duration: 0.3, scale: 1.01, rotationY: isMobile ? -1 : -1.5, ease: "power2.out" });
                    }
                });

                card.addEventListener('mouseleave', function() {
                    if (this === document.querySelector('.card-stack').children[0] && !isAnimating) {
                         const originalProps = CARD_PROPS[0];
                         gsap.to(this, { duration: 0.3, scale: originalProps.scale, rotationY: originalProps.rotationY, ease: "power2.out" });
                    }
                });
            });
        }
    });
</script>



</body>
</html>